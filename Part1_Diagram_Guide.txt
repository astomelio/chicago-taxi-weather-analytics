═══════════════════════════════════════════════════════════════════════════════
  DIAGRAMA DE ARQUITECTURA - GUÍA PARA DRAW.IO
  Part 1: Design Challenge - Solución Analítica Data Mesh
═══════════════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────────────┐
│                         FUENTES DE DATOS                                    │
│                                                                             │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐           │
│  │PostgreSQL  │  │   MySQL    │  │  MongoDB   │  │    SAP     │           │
│  │  (CRM)     │  │ (Products)  │  │  (Maisons) │  │   (ERP)    │           │
│  └──────┬─────┘  └──────┬─────┘  └──────┬─────┘  └──────┬─────┘           │
│         │                │                │                │                 │
│  ┌──────▼─────┐  ┌──────▼─────┐  ┌──────▼─────┐                          │
│  │Salesforce  │  │SurveyMonkey │                                              │
│  │  (CRM)     │  │  (Surveys)  │                                              │
│  └──────┬─────┘  └──────┬─────┘                                               │
│         │                │                                                      │
└─────────┼────────────────┼──────────────────────────────────────────────────┘
          │                │
          ▼                ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                    CAPA DE INGESTA DE DATOS                                 │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    STREAMING (Tiempo Real)                          │ │
│  │  ┌──────────┐         ┌──────────┐         ┌──────────┐             │ │
│  │  │Debezium │────────▶│ Pub/Sub │────────▶│ Dataflow │             │ │
│  │  │  (CDC)  │         │         │         │ (Beam)   │             │ │
│  │  └─────────┘         └─────────┘         └────┬─────┘             │ │
│  └─────────────────────────────────────────────────┼─────────────────────┘ │
│                                                    │                       │
│  ┌─────────────────────────────────────────────────┼─────────────────────┐ │
│  │                    BATCH (Diario)               │                     │ │
│  │  ┌──────────┐         ┌──────────┐               │                     │ │
│  │  │ Airbyte  │────────▶│ Cloud    │───────────────┘                     │ │
│  │  │          │         │ Storage  │                                     │ │
│  │  │          │         │ (Bronze) │                                     │ │
│  │  └──────────┘         └────┬────┘                                     │ │
│  │                            │                                           │ │
│  │  ┌──────────┐              │                                           │ │
│  │  │  Cloud   │──────────────┘                                           │ │
│  │  │Functions │                                                           │ │
│  │  │  (APIs)  │                                                           │ │
│  │  └──────────┘                                                           │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
└────────────────────────────────────┬──────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                      DATA LAKE (Bronze Layer)                               │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │              Google Cloud Storage (GCS)                              │ │
│  │                                                                      │ │
│  │  gs://data-lake/bronze/                                              │ │
│  │  ├── customers/                                                      │ │
│  │  │   ├── postgresql/                                                 │ │
│  │  │   ├── salesforce/                                                 │ │
│  │  │   └── sap/                                                        │ │
│  │  ├── products/                                                      │ │
│  │  │   ├── mysql/                                                      │ │
│  │  │   └── sap/                                                        │ │
│  │  └── maisons/                                                        │ │
│  │      ├── mongodb/                                                    │ │
│  │      └── surveymonkey/                                              │ │
│  │                                                                      │ │
│  │  Formato: Parquet | Particionado por fecha                          │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
└────────────────────────────────────┬──────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                    ORQUESTACIÓN (Cloud Composer)                            │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    Apache Airflow                                    │ │
│  │                                                                      │ │
│  │  DAGs por Dominio:                                                   │ │
│  │  • customers_ingest_dag                                              │ │
│  │  • customers_transform_dag                                          │ │
│  │  • products_ingest_dag                                              │ │
│  │  • products_transform_dag                                           │ │
│  │  • maisons_ingest_dag                                                │ │
│  │  • maisons_transform_dag                                             │ │
│  │                                                                      │ │
│  │  Monitoreo: Cloud Monitoring + Alertas                              │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
└────────────────────────────────────┬──────────────────────────────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│              DATA WAREHOUSE - DATA MESH (BigQuery)                         │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    CUSTOMERS DOMAIN                                  │ │
│  │  ┌──────────────────────────────────────────────────────────────┐   │ │
│  │  │  customers_domain.silver                                      │   │ │
│  │  │  • customers_unified                                          │   │ │
│  │  │  • customers_deduplicated                                     │   │ │
│  │  └──────────────────────────────────────────────────────────────┘   │ │
│  │  ┌──────────────────────────────────────────────────────────────┐   │ │
│  │  │  customers_domain.gold                                       │   │ │
│  │  │  • customer_360                                              │   │ │
│  │  │  • customer_segments                                         │   │ │
│  │  │  • customer_metrics                                           │   │ │
│  │  └──────────────────────────────────────────────────────────────┘   │ │
│  │  Team: Customer Analytics                                          │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    PRODUCTS DOMAIN                                 │ │
│  │  ┌──────────────────────────────────────────────────────────────┐   │ │
│  │  │  products_domain.silver                                      │   │ │
│  │  │  • products_catalog                                           │   │ │
│  │  │  • inventory_unified                                          │   │ │
│  │  └──────────────────────────────────────────────────────────────┘   │ │
│  │  ┌──────────────────────────────────────────────────────────────┐   │ │
│  │  │  products_domain.gold                                        │   │ │
│  │  │  • product_metrics                                            │   │ │
│  │  │  • product_recommendations_base                              │   │ │
│  │  └──────────────────────────────────────────────────────────────┘   │ │
│  │  Team: Product Analytics                                            │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    MAISONS DOMAIN                                   │ │
│  │  ┌──────────────────────────────────────────────────────────────┐   │ │
│  │  │  maisons_domain.silver                                         │   │ │
│  │  │  • maisons_normalized                                          │   │ │
│  │  │  • surveys_processed                                          │   │ │
│  │  └──────────────────────────────────────────────────────────────┘   │ │
│  │  ┌──────────────────────────────────────────────────────────────┐   │ │
│  │  │  maisons_domain.gold                                          │   │ │
│  │  │  • brand_metrics                                               │   │ │
│  │  │  • nps_scores                                                  │   │ │
│  │  └──────────────────────────────────────────────────────────────┘   │ │
│  │  Team: Brand Analytics                                              │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    SHARED (Cross-Domain)                            │ │
│  │  • customer_product_interactions                                   │ │
│  │  • cross_domain_metrics                                            │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
└────────────────────────────────────┬──────────────────────────────────────────┘
                                     │
                    ┌────────────────┴────────────────┐
                    │                                  │
                    ▼                                  ▼
┌──────────────────────────────────┐  ┌──────────────────────────────────────┐
│      TRANSFORMACIÓN              │  │        MACHINE LEARNING               │
│                                  │  │                                      │
│  ┌────────────────────────────┐ │  │  ┌────────────────────────────────┐ │
│  │          dbt                │ │  │  │      Vertex AI                 │ │
│  │  (Data Build Tool)          │ │  │  │  • Workbench (Jupyter)          │ │
│  │                            │ │  │  │  • Training                    │ │
│  │  Models por dominio:       │ │  │  │  • Prediction                   │ │
│  │  • customers_domain/       │ │  │  │  • Feature Store                │ │
│  │  • products_domain/       │ │  │  └────────────────────────────────┘ │
│  │  • maisons_domain/         │ │  │                                      │
│  │                            │ │  │  ┌────────────────────────────────┐ │
│  │  Tests automatizados       │ │  │  │      MLflow                    │ │
│  │  Documentación             │ │  │  │  • Experiment Tracking         │ │
│  │  Versionado (Git)          │ │  │  │  • Model Registry              │ │
│  └────────────────────────────┘ │  │  └────────────────────────────────┘ │
│                                  │  │                                      │
│  ┌────────────────────────────┐ │  │  Modelos:                           │
│  │    Apache Spark            │ │  │  • Collaborative Filtering         │
│  │    (Dataproc)              │ │  │  • Churn Prediction                │
│  │                            │ │  │  • Demand Forecasting              │
│  │  Para transformaciones     │ │  │  • Brand Sentiment                 │
│  │  complejas                 │ │  │                                      │
│  └────────────────────────────┘ │  └──────────────────────────────────────┘
└──────────────────────────────────┘
                    │                                  │
                    └────────────────┬─────────────────┘
                                     │
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                    CAPA DE VISUALIZACIÓN Y BI                               │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    Looker Studio                                     │ │
│  │  • Dashboard Customers                                              │ │
│  │  • Dashboard Products                                               │ │
│  │  • Dashboard Maisons                                                │ │
│  │  • Dashboard Ejecutivo (Cross-Domain)                                │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    Looker (Self-Service BI)                          │ │
│  │  • Exploración ad-hoc                                                │ │
│  │  • Embedded analytics                                                │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                    GOBERNANZA FEDERADA                                      │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    Dataplex (Data Catalog)                          │ │
│  │  • Catálogo de datos por dominio                                    │ │
│  │  • Data Lineage (rastreo de origen)                                 │ │
│  │  • Metadata management                                              │ │
│  │  • Búsqueda de datos                                                │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    Access Control                                   │ │
│  │  • BigQuery Column-Level Security                                   │ │
│  │  • IAM Roles por dominio                                            │ │
│  │  • Políticas de acceso descentralizadas                            │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    Data Observability                               │ │
│  │  • Great Expectations (open-source)                                 │ │
│  │  • dbt tests                                                        │ │
│  │  • Cloud Monitoring (alertas)                                        │ │
│  │  • Métricas: Freshness, Volume, Quality                             │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                    GITOPS Y DATAOPS                                         │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    GitHub Repositories                               │ │
│  │  • data-platform-infra (Terraform)                                  │ │
│  │  • data-pipelines (dbt, Airflow DAGs)                               │ │
│  │  • ml-models (ML code, MLflow)                                       │ │
│  │  • data-catalog (metadata, docs)                                      │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐ │
│  │                    CI/CD Pipelines (GitHub Actions)                   │ │
│  │                                                                      │ │
│  │  ┌──────────────────────────────────────────────────────────────┐ │ │
│  │  │  Pipeline Infraestructura                                      │ │ │
│  │  │  PR → Terraform Plan → Review → Merge → Apply                 │ │ │
│  │  └──────────────────────────────────────────────────────────────┘ │ │
│  │                                                                      │ │
│  │  ┌──────────────────────────────────────────────────────────────┐ │ │
│  │  │  Pipeline Datos                                                │ │ │
│  │  │  PR → dbt compile → dbt test → Review → Merge → dbt run        │ │ │
│  │  └──────────────────────────────────────────────────────────────┘ │ │
│  │                                                                      │ │
│  │  ┌──────────────────────────────────────────────────────────────┐ │ │
│  │  │  Pipeline ML                                                   │ │ │
│  │  │  PR → Tests → Review → Merge → Train → Validate → Deploy      │ │ │
│  │  └──────────────────────────────────────────────────────────────┘ │ │
│  └──────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════════════════════
  INSTRUCCIONES PARA DRAW.IO
═══════════════════════════════════════════════════════════════════════════════

1. CREAR CAPAS (LAYERS):
   - Fuentes de Datos
   - Ingesta
   - Data Lake
   - Orquestación
   - Data Warehouse (Data Mesh)
   - Transformación
   - ML
   - BI
   - Gobernanza
   - GitOps

2. COLORES SUGERIDOS:
   - Fuentes: #E3F2FD (Azul claro)
   - Ingesta: #FFF3E0 (Naranja claro)
   - Storage: #E8F5E9 (Verde claro)
   - Transformación: #FFFDE7 (Amarillo claro)
   - ML: #F3E5F5 (Morado claro)
   - BI: #FFEBEE (Rojo claro)
   - Gobernanza: #F5F5F5 (Gris claro)
   - GitOps: #212121 (Negro)

3. ICONOS (usar iconos de Google Cloud y open-source):
   - PostgreSQL, MySQL, MongoDB: Iconos de bases de datos
   - SAP, Salesforce: Iconos de aplicaciones
   - Debezium, Airbyte: Logos open-source
   - BigQuery: Icono de BigQuery
   - Airflow: Logo de Apache Airflow
   - dbt: Logo de dbt
   - Vertex AI: Icono de Vertex AI
   - Looker Studio: Icono de Looker Studio

4. FLECHAS:
   - Batch: Flechas sólidas negras gruesas
   - Streaming: Flechas punteadas azules
   - ML Pipeline: Flechas moradas
   - Metadata/Lineage: Flechas grises finas
   - GitOps: Flechas verdes

5. AGRUPACIONES:
   - Agrupar componentes por dominio (Customers, Products, Maisons)
   - Separar claramente las capas
   - Mostrar flujos de datos con flechas direccionales

6. TEXTO:
   - Títulos de secciones en negrita
   - Nombres de componentes claros
   - Agregar notas explicativas donde sea necesario

═══════════════════════════════════════════════════════════════════════════════
